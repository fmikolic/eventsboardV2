<% provide(:title, @category.name) %>

<header>
    <h1 class = "text-uppercase"><%= @category.name %> <small>Events</small></h1>


    <ul class="actions">
        <% admins_only do %>
            <li><%= link_to "Edit Category", edit_admin_category_path(@category), class: "edit" %></li>

            <li><%= link_to "Delete Category", admin_category_path(@category), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }, class: "delete" %></li>
        <% end %>
    </ul>
</header>


<div class="row">
  <div class="col-sm-3 pull-right">
    <div class="sidebar">
      <h3 class="discover">Discover</h3>
      <ul class="nav nav-pills nav-stacked">
        <li class='<%= "active" if current_page?("/events")%>'><%= link_to "ALL EVENTS", events_path %></li>
        <% @categories.each do |category| %>
            <li class="<%= "active" if current_page?("/categories/#{category.slug}")%> text-uppercase"> <%= link_to category.name, category_path(category) %></li>
        <% end %>
      </ul>
    </div>
  </div>


  <div id="events">
  <div class="col-sm-9">
    <h3>Discover and register to your favorite events</h3>
  </div>
    <% @category_events.each do |event| %>
      <div class="col-sm-9 pull-left">
        <%= link_to event_path(event) do %>
        <div class="events">
          <div class="row">
            <div class="col-sm-3">
              <%= image_tag event.image_url, class: "event-image" if event.image_url %>
            </div>
            <div class="col-sm-9">
              <h3 class="event-title"><%= event.title %></h3>
              <p>
                <span class="event-venue"><%= event.venue %> - <strong><%= event.location %></strong>
                </span>
              </p>
              <p class="lead-time">
                <span class="event-start"><%= time_format(event.start_date) %></span>
                <span class="pull-right">Organized by: <%= event.organizer %> </span>
              </p>
            </div>
          </div>
        </div>
        <%end%>
      </div>
    <% end %>
  </div>
</div>